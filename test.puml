@startuml
actor "Khách hàng" as Cus
participant "UI" as UI
participant "Cart Service" as Cart
participant "Product Service" as P
database "DB" as DB

== Thêm/Sửa/Xóa ==
Cus -> UI: Thêm/Chỉnh số lượng/Xóa sản phẩm
UI -> P: Kiểm tra tồn kho & giá hiện tại
P -> DB: Truy vấn tồn/giá
DB --> P: OK hoặc hết hàng
P --> UI: Kết quả kiểm tra
UI -> Cart: Cập nhật giỏ (add/update/remove)
Cart -> DB: Lưu giỏ hàng
DB --> Cart: OK
Cart --> UI: Tổng tiền tạm tính
UI -> Cus: Hiển thị giỏ/tổng tiền

alt Hết hàng / số lượng không hợp lệ
  UI -> Cus: Thông báo lỗi và giữ giá trị cũ
end
@enduml
