\chapter{Phân tích thiết kế hệ thống}

\section{Sơ đồ Use Case - Tác nhân và hành động}

\subsection{Sơ đồ Use Case tổng quát}
\begin{figure}[H]
    \centering
    \includegraphics[scale=0.4]{images/Sơ đồ usecase tổng quát.png}
    \caption{Sơ đồ Use Case tổng quát}
\end{figure}

\subsection{Usecase đăng ký}
\begin{figure}[H]
    \centering
    \includegraphics[scale=0.4]{images/usecase đăng ký.png}
    \caption{Sơ đồ usecase đăng ký}
\end{figure}
\begin{longtable}{|m{4cm}|m{10cm}|}
    \hline
    \textbf{Tên Use Case} & \textbf{Đăng ký} \\
    \hline
    Tác nhân & Khách hàng \\
    \hline
    Mô tả & Khách hàng sử dụng chức năng này để đăng ký tài khoản phục vụ cho đăng nhập vào hệ thống \\
    \hline
    Điều kiện kích hoạt & Chọn chức năng đăng ký ở hệ thống  \\
    \hline
    Tiền điệu kiện & Tác nhân chưa đăng nhập và chưa có tài khoản ở hệ thống \\
    \hline
    Hậu diều kiện & 
    \begin{itemize}
        \item Nếu thành công: Hệ thống sẽ thông báo đăng ký tài khoản thành công. Người dùng được chuyển hướng đén trang đăng nhập.
        \item Nếu thất bại: Hệ thống sẽ đưa ra thông báo chi tiết lỗi và yêu cầu nhập lại thông tin.
    \end{itemize} \\
    \hline
    Luồng sự kiện chính & 
    \begin{enumerate}[label=\arabic{*}.]
        \item Hệ thống hiển thị giao diện đăng nhập
        \item Người dùng bấm vào nút đăng ký
        \item Hệ thống hiển thị giao diện đăng ký
        \item Người dùng nhập tài khoản bao gồm email mật khẩu và xác nhận mật khẩu
        \item Hệ thống kiểm tra thông tin đăng ký
        \item Hiển thị giao diện xác nhận email
        \item Người dùng nhập mã otp được gửi về email
        \item Chuyển hướng đến trang đăng nhập
        \item Kết thúc usecase
    \end{enumerate} \\
    \hline
    Luồng sự kiện phụ & 
        \begin{enumerate}[label=\textbf{\arabic*.}, leftmargin=1.2em]
        \item \textbf{Người dùng hủy đăng ký}
            \begin{enumerate}[label*=\arabic*.]
            \item Người dùng chọn “Hủy” để rời trang đăng ký.
            \item Hệ thống hiển thị hộp thoại xác nhận hủy.
            \item Nếu xác nhận: hủy phiên đăng ký tạm, xóa dữ liệu chưa lưu, không tạo tài khoản.
            \item Hệ thống chuyển hướng về trang đăng nhập.
            \item Kết thúc usecase.
            \end{enumerate}
        \item \textbf{Email đã tồn tại} (phát sinh ở bước 5 luồng chính):
            \begin{enumerate}[label*=\arabic*.]
            \item Hệ thống báo “Email đã được sử dụng”.
            \item Yêu cầu người dùng đăng nhập hoặc chọn “Quên mật khẩu”.
            \item Kết thúc usecase.
            \end{enumerate}

        \item \textbf{Mã xác thực email hết hạn} (ở bước 7 luồng chính):
            \begin{enumerate}[label*=\arabic*.]
            \item Hiển thị thông báo “Mã hết hạn”.
            \item Cung cấp nút “Gửi lại mã”.
            \item Khi gửi lại thành công, quay lại luồng chính tại bước 6.
            \item Kết thúc usecase.
            \end{enumerate}
        \end{enumerate} \\
    \hline
    Các yêu cầu đặc biệt & Không có \\
    \hline
\end{longtable}
\subsection{Usecase đăng nhập}
\begin{figure}[H]
    \centering
    \includegraphics[scale=0.4]{images/usecase đăng nhập.png}
    \caption{Sơ đồ usecase đăng nhập}
\end{figure}

\begin{longtable}{|m{4cm}|m{10cm}|}
    \hline
    \textbf{Tên Use Case} & \textbf{Đăng ký} \\
    \hline
    Tác nhân & Người dùng \\
    \hline
    Mô tả & Tác nhân sử dụng usecase này để đăng nhập vào hệ thống\\
    \hline
    Điều kiện kích hoạt & Chọn chức năng đăng nhập ở hệ thống  \\
    \hline
    Tiền điệu kiện & Tác nhân chưa đăng nhập vào hệ thống \\
    \hline
    Hậu diều kiện & 
    \begin{itemize}
        \item Nếu thành công: Hệ thống sẽ hiển thị giao diện chính. Người dùng có thể thực hiện các chức năng theo đúng quyền hạn của mình
        \item Nếu thất bại: Hệ thống sẽ đưa ra thông báo "Thông tin đăng nhập không hợp lệ" và yêu cầu đăng nhập lại.
    \end{itemize} \\
    \hline
    Luồng sự kiện chính & 
    \begin{enumerate}[label=\arabic{*}.]
        \item Hệ thống hiển thị giao diện đăng nhập.
        \item Người dùng nhập tài khoản bao gồm tên đăng nhập và mật khẩu.
        \item Hệ thống kiểm tra và xác nhận thông tin đăng nhập.
        \item Hiển thị giao diện chính tùy vào vai trò của tài khoản đăng nhập là người dùng hay admin.
        \item Kết thúc usecase.
    \end{enumerate} \\
    \hline
    Luồng sự kiện phụ & 
        \begin{enumerate}[label=\textbf{\arabic*.}, leftmargin=1.2em]
        \item \textbf{Thông tin email hoặc mật khẩu sai}
            \begin{enumerate}[label*=\arabic*.]
            \item Người dùng nhập thông tin sai
            \item Hệ thống báo lỗi
            \item Kết thúc Use Case
            \end{enumerate}
        \end{enumerate} \\
    \hline
    Các yêu cầu đặc biệt & Không có \\
    \hline
\end{longtable}
